<!DOCTYPE html>
<html>
  <head>
    <title>Biological Health Risk Assessment for Pregnant Women</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="testbox">
        <div class="banner">
          <h1><strong>Biological Health Risk Assessment for Pregnant Women</strong></h1>
        </div>
        <h2>Personal Information</h2>
        <div class="item">
          <!-- Formatting for our input variables -->
          <label for="name">Name<span>*</span></label>
          <input id="name" type="text" name="name" required/>

          <label for="age">How old are you? (in years)<span>*</span></label>
          <input id="age" type="number" name="age" required min="0" max="150" required/>

          <label for="blood-pressure-systolic">What is your systolic blood pressure? (in mmHg)<span>*</span></label>  <!-- two values with the same ranges-->
          <input type="number" id="blood-pressure-systolic" name="blood-pressure-systolic" min="0" max="200" required/>

          <label for="blood-pressure-diastolic">What is your diastolic blood pressure? (in mmHg)<span>*</span></label>  <!-- two values with the same ranges-->
          <input type="number" id="blood-pressure-diastolic" name="blood-pressure-diastolic" min="0" max="200" required/>

          <label for="heart-rate">What is your resting heart rate? (in beats per minute)<span>*</span></label>
          <input type="number" id="heart-rate" name="heart-rate" min="0" max="220" required/>
            
          <label for="btemp">What is your average body temperature? (in Fahrenheit)<span>*</span></label>
          <input type="number" id="btemp" name="btemp" min="80" max="120" required/>

          <label for="blood-sugar">What is your blood sugar? (in mmol/L)<span>*</span></label>
          <input type="number" id="blood-sugar" name="blood-sugar" min="0" max="20" required/>

          <label for="notif">Would you like to be notified about your health risk?<span>*</span></label> 
          <br>

          <div class="yes-button">
            <input type="radio" name="yes" id="yes" value="yes" class="yes">
            <label for="yes" name="yes" class="radio">Yes</label>
          </div> 

          <input type="radio" name,id,value="no">
          <label for="no" name="no" class="radio">No</label> 

          <br>
          <div class="phone-number">
            <label for="phone">Enter your phone number:</label> <!-- make this only pop up if "Yes" is clicked-->
            <input type="tel" id="phone" name="phone" placeholder="012-345-6789" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"> 
          </div>  
          
        <div class="btn-block">
          <button onclick="submit_data()">Submit</button> <!-- make this type="submit"? ; locally, it is sending me back to the home directory--> 
        </div>
      <br>
      <div class="citations">
        <p>Image is from <a href="https://www.paho.org/en/news/22-9-2020-paho-reports-more-60000-confirmed-cases-covid-19-pregnant-women-458-deaths"> 
          the Pan American Health Organization</a></p>
        <p>HTML Template is from <a href="https://www.w3docs.com/learn-html/html-form-templates.html">W3 Docs</a></p>
      </div>
    </div> 
    <script> 
      $(".yes").click(function() {
        $(".phone-number").show();
      });
      function submit_data() {
        const patientData = {
          // name: document.getElementById("name").value,
          age: document.getElementById("age").valueAsNumber,
          heart_rate: document.getElementById("heart-rate").valueAsNumber,
          bp_systolic: document.getElementById("blood-pressure-systolic").valueAsNumber,
          bp_diastolic: document.getElementById("blood-pressure-diastolic").valueAsNumber,
          blood_sugar: document.getElementById("blood-sugar").valueAsNumber,
          body_temp: document.getElementById("btemp").valueAsNumber
        }
        console.log(patientData)
        postData("http://35.197.88.17/api/get_risk", patientData).then(data => {console.log(data)})
      }
      
      async function postData(url = '', data = {}) {
        // Default options are marked with *
        const response = await fetch(url, {
          method: 'POST', // *GET, POST, PUT, DELETE, etc.
          mode: 'cors', // no-cors, *cors, same-origin
          cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
          credentials: 'same-origin', // include, *same-origin, omit
          headers: {
            'Content-Type': 'application/json'
            // 'Content-Type': 'application/x-www-form-urlencoded',
          },
          redirect: 'follow', // manual, *follow, error
          referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
          body: JSON.stringify(data) // body data type must match "Content-Type" header
        });
        return response.json(); // parses JSON response into native JavaScript objects
      }
    </script>
  </body>
</html>